<form [formGroup]="form" class="edit-form">

  <!-- Datos generales -->
  <div class="form-grid">

    <mat-form-field appearance="outline">
      <mat-label>Nombre*</mat-label>
      <input matInput formControlName="first_name">
      <mat-error *ngIf="form.get('first_name')?.hasError('required')">
        El nombre es obligatorio
      </mat-error>
    </mat-form-field>

    <ng-container *ngIf="form.get('client_type')?.value !== 'company'">
      <mat-form-field appearance="outline">
        <mat-label>Apellidos</mat-label>
        <input matInput formControlName="last_name">
      </mat-form-field>
    </ng-container>

    <mat-form-field appearance="outline">
      <mat-label>Email*</mat-label>
      <input matInput formControlName="email">
      <mat-error *ngIf="form.get('email')?.hasError('required')">
        El email es obligatorio
      </mat-error>
      <mat-error *ngIf="form.get('email')?.hasError('invalidEmail')">
        El email no tiene un formato válido
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Teléfono móvil</mat-label>
      <input matInput formControlName="phone_mobile">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Teléfono fijo</mat-label>
      <input matInput formControlName="phone_landline">
    </mat-form-field>

    <!-- Documento -->

    <mat-form-field appearance="outline">
      <mat-label>Tipo documento*</mat-label>
      <mat-select formControlName="document_type">
        <mat-option value="dni">DNI</mat-option>
        <mat-option value="nie">NIE</mat-option>
        <mat-option value="passport">Pasaporte</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Nº documento*</mat-label>
      <input matInput formControlName="document_number">

      <mat-error *ngIf="form.get('document_number')?.hasError('required')">
        El documento es obligatorio
      </mat-error>

      <mat-error *ngIf="form.get('document_number')?.hasError('invalidDNI')">
        El DNI no es válido
      </mat-error>

      <mat-error *ngIf="form.get('document_number')?.hasError('invalidNIE')">
        El NIE no es válido
      </mat-error>
    </mat-form-field>

    <!-- Dirección -->

    <mat-form-field appearance="outline">
      <mat-label>Dirección</mat-label>
      <input matInput formControlName="address">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Localidad</mat-label>
      <input matInput formControlName="city">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Código postal</mat-label>
      <input matInput formControlName="postal_code">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Provincia</mat-label>
      <input matInput formControlName="province">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>País</mat-label>
      <input matInput formControlName="country">
    </mat-form-field>

  </div>

  <!-- Botón guardar -->
  <div class="actions">
    <button mat-flat-button color="primary"
            (click)="save()"
            [disabled]="form.invalid || isSaving">
      {{ isSaving ? "Guardando..." : "Guardar cambios" }}
    </button>
  </div>

</form>
